<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-technical/programming-language-pragmatics/06" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">第六章 | MisakaTang</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doc.misakatang.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://doc.misakatang.cn/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://doc.misakatang.cn/docs/technical/programming-language-pragmatics/06"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="第六章 | MisakaTang"><meta data-rh="true" name="description" content="Control Flow"><meta data-rh="true" property="og:description" content="Control Flow"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doc.misakatang.cn/docs/technical/programming-language-pragmatics/06"><link data-rh="true" rel="alternate" href="https://doc.misakatang.cn/docs/technical/programming-language-pragmatics/06" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://doc.misakatang.cn/docs/technical/programming-language-pragmatics/06" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="MisakaTang RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="MisakaTang Atom Feed"><link rel="stylesheet" href="/assets/css/styles.60e0ea92.css">
<script src="/assets/js/runtime~main.20d72f50.js" defer="defer"></script>
<script src="/assets/js/main.b8065e86.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Open Source Life</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/technical">Technical</a><a class="navbar__item navbar__link" href="/docs/life/coffee">Life</a><a class="navbar__item navbar__link" href="/docs/tools/">Tools</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://misakatang.cn/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">MisakaTang&#x27;s Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/TangMisaka23001" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"><b>Open Source Life</b></a><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/technical">技术笔记</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/programming-language-pragmatics">Programming Language Pragmatics</a><button aria-label="折叠侧边栏分类 &#x27;Programming Language Pragmatics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/01">第一章上</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/02">第一章下</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/03">第二章</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/04">第三章</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/05">第四章</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/technical/programming-language-pragmatics/06">第六章</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/07">第七章</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/08">第八章</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/technical/programming-language-pragmatics/09">第九章</a></li></ul></li></ul></nav><button type="button" title="收起侧边栏" aria-label="收起侧 边栏" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/programming-language-pragmatics"><span itemprop="name">Programming Language Pragmatics</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">第六章</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>第六章</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="control-flow">Control Flow<a class="hash-link" aria-label="Control Flow的直接链接" title="Control Flow的直接链接" href="/docs/technical/programming-language-pragmatics/06#control-flow">​</a></h2>
<p>the language mechanisms used to specify ordering into several categories:</p>
<ul>
<li>Sequencing</li>
<li>Selection</li>
<li>Iteration</li>
<li>Procedural abstraction</li>
<li>Recursion</li>
<li>Concurrency</li>
<li>Exception handling and speculation</li>
<li>Nondeterminacy</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="expression-evaluation">Expression Evaluation<a class="hash-link" aria-label="Expression Evaluation的直接链接" title="Expression Evaluation的直接链接" href="/docs/technical/programming-language-pragmatics/06#expression-evaluation">​</a></h3>
<p>An expression generally consists of either a simple object (e.g., a literal constant, or a named variable or constant) or an operator or function applied to a collection of operands or arguments, each of which in turn is an expression.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="precedence-and-associativity">Precedence and Associativity<a class="hash-link" aria-label="Precedence and Associativity的直接链接" title="Precedence and Associativity的直接链接" href="/docs/technical/programming-language-pragmatics/06#precedence-and-associativity">​</a></h4>
<p>运算符的优先级和结合性</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="assignments">Assignments<a class="hash-link" aria-label="Assignments的直接链接" title="Assignments的直接链接" href="/docs/technical/programming-language-pragmatics/06#assignments">​</a></h4>
<p>computation typically consists of an ordered series of changes to the values of variables in memory. <strong>Assignments</strong> provide the principal means by which to make the changes.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="side-effect">side effect<a class="hash-link" aria-label="side effect的直接链接" title="side effect的直接链接" href="/docs/technical/programming-language-pragmatics/06#side-effect">​</a></h5>
<p>Assignment is perhaps the most fundamental <strong>side effect</strong>: while the evaluation of an assignment may sometimes yield a value, what we really care about is the fact that it changes the value of a variable, thereby influencing the result of any later computation in
which the variable appears.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="references-and-values">References and Values<a class="hash-link" aria-label="References and Values的直接链接" title="References and Values的直接链接" href="/docs/technical/programming-language-pragmatics/06#references-and-values">​</a></h5>
<p>there are some subtle but important differences in the semantics of assignment in different imperative languages. These differences are often invisible, because they do not affect the behavior of simple programs.</p>
<ul>
<li>值传递和引用传递</li>
<li>左值和右值</li>
</ul>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="boxing">Boxing<a class="hash-link" aria-label="Boxing的直接链接" title="Boxing的直接链接" href="/docs/technical/programming-language-pragmatics/06#boxing">​</a></h5>
<p>基础类型的拆装箱</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="initialization">Initialization<a class="hash-link" aria-label="Initialization的直接链接" title="Initialization的直接链接" href="/docs/technical/programming-language-pragmatics/06#initialization">​</a></h4>
<p>There are several reasons, however, why such initial values may be useful:</p>
<ul>
<li>静态变量需要初始化</li>
<li>编译器预分配初始化值优化（Java Integer预分配）</li>
<li>使用未初始化变量引起的问题</li>
</ul>
<p>It should be emphasized that initialization saves time <strong>only</strong> for variables that are <strong>statically allocated</strong>.</p>
<p>If a variable is not given an initial value explicitly in its declaration, the language may specify a <strong>default value</strong>.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="dynamic-checks">Dynamic Checks<a class="hash-link" aria-label="Dynamic Checks的直接链接" title="Dynamic Checks的直接链接" href="/docs/technical/programming-language-pragmatics/06#dynamic-checks">​</a></h5>
<p>Instead of giving every uninitialized variable a default value, a language or implementation can choose to define the use of an uninitialized variable as a <strong>dynamic semantic error</strong>, and can catch these errors at run time.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="definite-assignment">Definite Assignment<a class="hash-link" aria-label="Definite Assignment的直接链接" title="Definite Assignment的直接链接" href="/docs/technical/programming-language-pragmatics/06#definite-assignment">​</a></h5>
<p>通过控制流分析静态检测未初始化变量：</p>
<p>This notion is based on the control flow of the program, and can be statically checked by the compiler.</p>
<h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="constructors">Constructors<a class="hash-link" aria-label="Constructors的直接链接" title="Constructors的直接链接" href="/docs/technical/programming-language-pragmatics/06#constructors">​</a></h5>
<p>构造器默认初始化：</p>
<p>Many object-oriented languages (Java and C# among them) allow the programmer to define types for which initialization of <strong>dynamically allocated variables occurs automatically</strong>, even when <strong>no initial value is specified in the declaration</strong>.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ordering-within-expressions">Ordering within Expressions<a class="hash-link" aria-label="Ordering within Expressions的直接链接" title="Ordering within Expressions的直接链接" href="/docs/technical/programming-language-pragmatics/06#ordering-within-expressions">​</a></h4>
<p>表达式内求值重要的原因：</p>
<ul>
<li>Side effects: 表达式内函数求值副作用</li>
<li>Code improvement: 求值顺序和编译器优化</li>
</ul>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="applying-mathematical-identities数学恒等式">Applying Mathematical Identities（数学恒等式）<a class="hash-link" aria-label="Applying Mathematical Identities（数学恒等式）的直接链接" title="Applying Mathematical Identities（数学恒等式）的直接链接" href="/docs/technical/programming-language-pragmatics/06#applying-mathematical-identities数学恒等式">​</a></h4>
<p>表达式优化影响求值顺序会导致精度问题</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="short-circuit-evaluation短路表达式">Short-Circuit Evaluation（短路表达式）<a class="hash-link" aria-label="Short-Circuit Evaluation（短路表达式）的直接链接" title="Short-Circuit Evaluation（短路表达式）的直接链接" href="/docs/technical/programming-language-pragmatics/06#short-circuit-evaluation短路表达式">​</a></h4>
<p>A compiler that performs <em>short-circuit evaluation</em> of Boolean expressions will generate code that skips the second half of both of these computations when the overall value can be determined from the first half.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="structured-and-unstructured-flow">Structured and Unstructured Flow<a class="hash-link" aria-label="Structured and Unstructured Flow的直接链接" title="Structured and Unstructured Flow的直接链接" href="/docs/technical/programming-language-pragmatics/06#structured-and-unstructured-flow">​</a></h3>
<p>汇编中使用的goto（非结构化）编程被高级语言抛弃（结构化编程）</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="structured-alternatives-to-goto">Structured Alternatives to goto<a class="hash-link" aria-label="Structured Alternatives to goto的直接链接" title="Structured Alternatives to goto的直接链接" href="/docs/technical/programming-language-pragmatics/06#structured-alternatives-to-goto">​</a></h4>
<p>Where once a goto might have been used to escape from the middle of a loop, most modern languages provide a <strong>break</strong> or <strong>exit</strong> statement for this purpose.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="multilevel-returns">Multilevel Returns<a class="hash-link" aria-label="Multilevel Returns的直接链接" title="Multilevel Returns的直接链接" href="/docs/technical/programming-language-pragmatics/06#multilevel-returns">​</a></h4>
<p>return和 local goto都可以从当前子程序中返回，但是 nonlocal goto会破坏这种情况，如果直接goto到其他子程序中会破坏当前子程序堆栈，还需要立刻加载另一个子程序的堆栈。如果使用return这些都是在执行到return关键字时才发生的。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="errors-and-other-exceptions">Errors and Other Exceptions<a class="hash-link" aria-label="Errors and Other Exceptions的直接链接" title="Errors and Other Exceptions的直接链接" href="/docs/technical/programming-language-pragmatics/06#errors-and-other-exceptions">​</a></h4>
<p>需要Exceptions的原因：</p>
<blockquote>
<p>In a related and arguably more common situation, a deeply nested block or subroutine may discover that it is <strong>unable to proceed with its usual function</strong>, and moreover lacks the contextual information it would <strong>need to recover</strong> in any graceful way.</p>
</blockquote>
<p>As a structured alternative, many modern languages provide an <strong>exception-handling</strong> mechanism for convenient, nonlocal recovery from exceptions.</p>
<p>大多数语言只提供异常机制而不提供从多级调用  中直接return的机制（想直接跳出多级调用只能抛异常）。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="continuations">Continuations<a class="hash-link" aria-label="Continuations的直接链接" title="Continuations的直接链接" href="/docs/technical/programming-language-pragmatics/06#continuations">​</a></h4>
<p>The notion of nonlocal gotos that unwind the stack can be generalized by defining what are known as continuations.</p>
<p>call/cc =&gt; 控制流变换：</p>
<blockquote>
<p>在 Scheme 中，假设 call/cc 捕捉到的 current continuation 为 cc(位于 lambda 中)，如果 cc 作为过程 直接或间接地被调用（即给它传值），call/cc 会立即返回，返回值即为传入 cc 的值。即一旦 current continuation 被调用，控制流会跳到 call/cc 处。因此，利用 call/cc，我们可以摆脱顺序执行的限制，在程序中跳来跳去，非常灵活。</p>
</blockquote>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sequencing">Sequencing<a class="hash-link" aria-label="Sequencing的直接链接" title="Sequencing的直接链接" href="/docs/technical/programming-language-pragmatics/06#sequencing">​</a></h3>
<p>Like assignment, sequencing is central to imperative programming. It is the principal means of controlling <strong>the order in which side effects</strong> (e.g.,assignments) occur</p>
<p>顺序和副作用，无副作用函数可以进行指令重排提升性能。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="selection">Selection<a class="hash-link" aria-label="Selection的直接链接" title="Selection的直接链接" href="/docs/technical/programming-language-pragmatics/06#selection">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="short-circuited-conditions">Short-Circuited Conditions<a class="hash-link" aria-label="Short-Circuited Conditions的直接链接" title="Short-Circuited Conditions的直接链接" href="/docs/technical/programming-language-pragmatics/06#short-circuited-conditions">​</a></h4>
<p>虽然if else语句中包含一个布尔表达式，但是通常不需要将其结果解析出来放在寄存器中，而是拆分布尔表达式用来控制代码跳转（通过短路表达式来优化代码）。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="caseswitch-statements">Case/Switch Statements<a class="hash-link" aria-label="Case/Switch Statements的直接链接" title="Case/Switch Statements的直接链接" href="/docs/technical/programming-language-pragmatics/06#caseswitch-statements">​</a></h4>
<p>if else语句过长时可能会被优化成 switch/case 语句（通过查表来优化代码性能）。</p>
<p>case查表也需要优化性能（如果静态值范围稀疏。。。）</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="iteration">Iteration<a class="hash-link" aria-label="Iteration的直接链接" title="Iteration的直接链接" href="/docs/technical/programming-language-pragmatics/06#iteration">​</a></h3>
<p>Iteration and recursion are the two mechanisms that allow a computer to perform similar operations repeatedly.</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="enumeration-controlled-loopsfor循环">Enumeration-Controlled Loops（for循环）<a class="hash-link" aria-label="Enumeration-Controlled Loops（for循环）的直接链接" title="Enumeration-Controlled Loops（for循环）的直接链接" href="/docs/technical/programming-language-pragmatics/06#enumeration-controlled-loopsfor循环">​</a></h4>
<p>在编译器生成代码时的一个可能的优化是预先计算迭代次数：<code>max([last-first+step]/step, 0)</code></p>
<p>枚举控制循环的几个设计问题：</p>
<ol>
<li>Can control enter or leave the loop in any way other than through the enumeration mechanism? =&gt; break/exit</li>
<li>What happens if the loop body modifies variables that were used to compute the end-of-loop bound? =&gt; 不允许</li>
<li>What happens if the loop body modifies the index variable itself? =&gt; 禁止在循环体内自己更新索引</li>
<li>Can the program read the index variable after the loop has completed, and if so, what will its value be? =&gt; 循环结束后索引值是未定义的</li>
</ol>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="combination-loops">Combination Loops<a class="hash-link" aria-label="Combination Loops的直接链接" title="Combination Loops的直接链接" href="/docs/technical/programming-language-pragmatics/06#combination-loops">​</a></h4>
<p>自定义步长的for循环</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="iterators">Iterators<a class="hash-link" aria-label="Iterators的直接链接" title="Iterators的直接链接" href="/docs/technical/programming-language-pragmatics/06#iterators">​</a></h4>
<ul>
<li>range()</li>
<li>对象迭代器</li>
<li>惰性迭代流</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="recursion-递归">Recursion 递归<a class="hash-link" aria-label="Recursion 递归的直接链接" title="Recursion 递归的直接链接" href="/docs/technical/programming-language-pragmatics/06#recursion-递归">​</a></h3>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="iteration-and-recursion">Iteration and Recursion<a class="hash-link" aria-label="Iteration and Recursion的直接链接" title="Iteration and Recursion的直接链接" href="/docs/technical/programming-language-pragmatics/06#iteration-and-recursion">​</a></h4>
<p>Iteration is in some sense the more “natural” of the two in imperative languages, because it is based on the repeated modification of variables.</p>
<p>Recursion is the more natural of the two in functional languages, because it does not change variables.</p>
<p>通常认为迭代比递归更高效，但是编译器优化也可以生成高效的递归代码，特别是尾递归代码的优化（不需要额外生成新的函数堆栈，可以重用当前函数的栈空间）</p>
<p>编译器也可以优化非尾递归代码，转换为尾递归代码执行。</p>
<p>使用递  归思想思考代码（没有副作用的递归）可以产生更少的bug。</p>
<h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="applicative--and-normal-order-evaluation">Applicative- and Normal-Order Evaluation<a class="hash-link" aria-label="Applicative- and Normal-Order Evaluation的直接链接" title="Applicative- and Normal-Order Evaluation的直接链接" href="/docs/technical/programming-language-pragmatics/06#applicative--and-normal-order-evaluation">​</a></h4>
<p>Throughout the discussion so far we have assumed implicitly that arguments are <strong>evaluated before passing them to a subroutine</strong>. This need not be the case. It is possible to <strong>pass a representation of the unevaluated arguments to the subroutine</strong> instead, and to evaluate them only when (if) the value is actually needed.</p>
<p>惰性求值</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nondeterminacy">Nondeterminacy<a class="hash-link" aria-label="Nondeterminacy的直接链接" title="Nondeterminacy的直接链接" href="/docs/technical/programming-language-pragmatics/06#nondeterminacy">​</a></h3>
<p>不确定的控制流（运行时才能确定）。</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="summary-and-concluding-remarks">Summary and Concluding Remarks<a class="hash-link" aria-label="Summary and Concluding Remarks的直接链接" title="Summary and Concluding Remarks的直接链接" href="/docs/technical/programming-language-pragmatics/06#summary-and-concluding-remarks">​</a></h3>
<p>在本章中，我们介绍了编程语言中发现的主要控制流形式：顺序、选择、迭代、程序抽象、递归、并发、异常处理和推测以及不确定性。顺序指定某些操作按顺序发生，一个接一个。选择表达了在两个或更多控制流替代方案之间的选择。迭代和递归是重复执行操作的两种方式。递归以自身的简单实例定义操作；它依赖于程序抽象。迭代重复一个操作以获得其副作用。顺序和迭代是命令式（特别是冯·诺依曼）编程的基础。递归是函数式编程的基础。不确定性允许程序员故意不指定控制流的某些方面。我们只简要地触及了并发；它将是第12章的主题。程序抽象（子程序）是第8章的主题。异常处理和推测将在第8.5节和第12.4.4节中介绍。</p>
<p>在我们对控制流机制的调查之前，我们讨论了表达式评估。我们考虑了左值和右值之间的区别，以及变量的值模型和引用模型之间的区别，在值模型中，变量是数据的命名容器，在引用模型中，变量是对数据对象的引用。我们考虑了表达式内的优先级、结合性和排序问题。我们检查了短路布尔评估及其通过跳转代码的实现，这既是一个影响表达式正确性的语义问题（其子部分并非总是定义良好），也是一个影响评估复杂布尔表达式所需时间的实现问题。</p>
<p>构造的发展受到了许多目标的驱动，包括编程的便利性、语义的优雅性、实现的便利性和运行时效率。在某些情况下，这些目标被证明是互补的。例如，我们已经看到短路评估既导致更快的代码，也（在许多情况下）导致更清晰的语义。同样地，为枚举控制循环的索引变量引入一个新的局部作用域，避免了循环后索引值的语义问题和（在某种程度上）潜在溢出的实现问题。</p>
<p>在其他情况下，语言语义的改进被认为值得在运行时效率上付出一点小代价。我们在迭代器的发展中看到了这一点：像许多形式的抽象一样，它们在许多情况下增加了适度的运行时成本（例如，与显式嵌入枚举集合的实现到循环的控制流中相比），但却带来了模块化、清晰性和代码重用机会的巨大回报。同样地，Java的开发者会辩称，对于许多应用程序来说，通过广泛的语义检查、标准格式的数值类型等提供的可移植性和安全性远比  速度更重要。</p>
<p>在一些情况下，编译器技术的进步或设计者构建更复杂编译器的简单意愿，使得整合曾被认为过于昂贵的功能成为可能。Ada中的案例语句的标签范围要求编译器准备生成采用二进制搜索的代码。C++中的内联函数消除了在微小函数的低效率和宏的混乱语义之间选择的需要。异常（如我们将在第8.5.3节中看到）可以以这样一种方式实现，即在常见情况下（当它们不发生时）不会产生任何成本，但实现相当复杂。迭代器、装箱、泛型（第8.4节）和一级函数同样相当复杂，但在主流命令式语言中越来越常见。</p>
<p>一些实现技术（例如，重新排列表达式以发现公共子表达式，或者在找到可接受的选择后避免在不确定性构造中评估守卫）足够重要，以至于可以证明对程序员施加适度负担是合理的（例如，在必要时添加括号以避免溢出或确保数值稳定性，或确保守卫中的表达式没有副作用）。其他在语义上有用的机制（例如，惰性评估、续体或真正随机的不确定性）通常被认为足够复杂或昂贵，只在特殊情况下才值得使用（如果有的话）。</p>
<p>在相对原始的语言中，我们通常可以通过编程约定获得一些缺失功能的好处。例如，在早期的Fortran方言中，我们可以限制goto的使用，以模仿更现代语言的控制流。在没有短路评估的语言中，我们可以编写嵌套的选择语句。在没有迭代器的语言中，我们可以编写一组提供等效功能的子程序。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/编译器">编译器</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/programming-language-pragmatics">Programming Language Pragmatics</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/technical/programming-language-pragmatics/05"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">第四章</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/technical/programming-language-pragmatics/07"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">第七章</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#control-flow">Control Flow</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#expression-evaluation">Expression Evaluation</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#precedence-and-associativity">Precedence and Associativity</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#assignments">Assignments</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#initialization">Initialization</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#ordering-within-expressions">Ordering within Expressions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#applying-mathematical-identities数学恒等式">Applying Mathematical Identities（数学恒等式）</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#short-circuit-evaluation短路表达式">Short-Circuit Evaluation（短路表达式）</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#structured-and-unstructured-flow">Structured and Unstructured Flow</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#structured-alternatives-to-goto">Structured Alternatives to goto</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#multilevel-returns">Multilevel Returns</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#errors-and-other-exceptions">Errors and Other Exceptions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#continuations">Continuations</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#sequencing">Sequencing</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#selection">Selection</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#short-circuited-conditions">Short-Circuited Conditions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#caseswitch-statements">Case/Switch Statements</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#iteration">Iteration</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#enumeration-controlled-loopsfor循环">Enumeration-Controlled Loops（for循环）</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#combination-loops">Combination Loops</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#iterators">Iterators</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#recursion-递归">Recursion 递归</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#iteration-and-recursion">Iteration and Recursion</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#applicative--and-normal-order-evaluation">Applicative- and Normal-Order Evaluation</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#nondeterminacy">Nondeterminacy</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/technical/programming-language-pragmatics/06#summary-and-concluding-remarks">Summary and Concluding Remarks</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/technical">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://newzone.top" target="_blank" rel="noopener noreferrer" class="footer__link-item">LearnData 开源笔记<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wiki-power.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Power&#x27;s Wiki<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Friendly Link</div><ul class="footer__items clean-list"><li class="footer__item"><a href="http://blog.bbchen.top" target="_blank" rel="noopener noreferrer" class="footer__link-item">BB chen的漂流记<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://blog.zhuzhenyuan.cn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Aurthur_的博客<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 MisakaTang, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>